(()=>{var o={d:(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},t={},e=(o.r(t),o.d(t,{Logger:()=>B,debug:()=>N,error:()=>_,logs:()=>L,print:()=>H}),{}),n=(o.r(e),o.d(e,{Events:()=>W,emit:()=>K,on:()=>V}),{}),a=(o.r(n),o.d(n,{BindListener:()=>Q,UnbindListener:()=>G}),{}),i=(o.r(a),o.d(a,{BindWatcher:()=>et,UnbindWatcher:()=>nt}),{}),r=(o.r(i),o.d(i,{BindLoop:()=>at,UnbindLoop:()=>it,beat:()=>ot}),{}),s=(o.r(r),o.d(r,{RecordDrop:()=>ht,RecordJump:()=>dt,RecordRoom:()=>lt,RecordSnag:()=>bt,RecordSong:()=>ut,RecordVote:()=>ft,current_djs:()=>ct,last_played:()=>st,now_playing:()=>rt}),{}),c=(o.r(s),o.d(s,{batch:()=>kt,chat:()=>vt,ding:()=>mt,drop:()=>gt,getChat:()=>Ot,getName:()=>St,hasPing:()=>xt,jump:()=>pt,mail:()=>wt,post:()=>jt,vote:()=>yt}),{}),l=(o.r(c),o.d(c,{CanNotify:()=>Dt,HasNotify:()=>Et,SendNotify:()=>It,bully:()=>Pt,holding:()=>Tt,notify:()=>Ct}),{}),u=(o.r(l),o.d(l,{click:()=>Lt,download:()=>Rt,open:()=>qt}),{}),d=(o.r(u),o.d(u,{bodyClass:()=>Nt,injectStyle:()=>Bt,insertScript:()=>Ht,insertSheet:()=>_t}),{}),h=(o.r(d),o.d(d,{Find:()=>Wt,FindFail:()=>zt,FindLobby:()=>Qt,FindRoom:()=>Kt,FindTT:()=>Vt}),{});o.r(h),o.d(h,{Attached:()=>Xt,Reattach:()=>Zt,addPlugin:()=>te,attach:()=>Gt,detach:()=>Yt});const f=JSON.parse('{"u2":"tt-browser-api","i8":"0.2.1"}');function b(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}()||function(t){if(t){if("string"==typeof t)return p(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?p(t,void 0):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var L=[],N=function(t,e){e={type:"debug",data:e=!!e&&{data:e},text:t};return this.Logger(e,"color: grey;")},H=function(t,e){e={type:"print",data:e=!!e&&{data:e},text:t};return this.Logger(e,"font-weight: bold;")},_=function(t,e){return this.Logger({type:"error",data:e,text:t},"font-weight: bold;")},B=function(t,e){var n;t.time=F(),this.logs.push(t),this.emit("log",t),"debug"==t.type&&!this.debugging||(e=J(this.name,t,e),"error"==t.type&&(n=console).error.apply(n,b(e)),"print"==t.type&&(n=console).info.apply(n,b(e)),"debug"==t.type&&(n=console).log.apply(n,b(e)))},F=function(){return(new Date).toLocaleTimeString("en-US").split(" ")[0]},J=function(t,e,n){t=[U(t,e),n];return e.data&&t.push(e.data),t},U=function(t,e){return"%c".concat(t," (").concat(e.time,") :: ").concat(e.text)};function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var W={},V=function(t,n){var o=this;Array.isArray(t)||(t=[t]),Array.isArray(n)||(n=[n]),t.forEach(function(t){var e=o.Events[t];e||(o.Events[t]=e=[]),n.forEach(function(t){return e.push(t.bind(o))})})},K=function(t){var e=this.Events[t]||!1;if(e){for(var n=arguments.length,o=new Array(1<n?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];var i,r=function(t,e){var n,o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t){if(t){if("string"==typeof t)return g(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?g(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length)return o&&(t=o),n=0,{s:e=function(){},n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,r=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return i=t.done,t},e:function(t){r=!0,a=t},f:function(){try{i||null==o.return||o.return()}finally{if(r)throw a}}}}(e);try{for(r.s();!(i=r.n()).done;){var s=i.value;try{s.apply(void 0,o)}catch(e){this.error("Event (".concat(t,")"),e)}}}catch(t){r.e(t)}finally{r.f()}}};function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function z(t){var e=t.command;if(t.command)return"speak"==e?function(t){var e={text:t.text,ping:this.hasPing(t.text),self:t.userid==this.user.id,user:{id:t.userid,name:t.name},target:this.getChat(t.text,t.name),raw:t};this.debug("[chat] ".concat(t.name),e),this.emit("chat",e)}.bind(this)(t):"pmmed"==e?function(t){var e=t.senderid,n=this.getName(e),e={text:t.text,user:{id:e,name:n},raw:t};this.debug("[mail] ".concat(n),e),this.emit("mail",e)}.bind(this)(t):"add_dj"==e?function(t){var e,n=function(t){var e,n,o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t){if(t){if("string"==typeof t)return m(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?m(t,void 0):void 0}}(t)))return o&&(t=o),e=0,{s:n=function(){},n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,r=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return i=t.done,t},e:function(t){r=!0,a=t},f:function(){try{i||null==o.return||o.return()}finally{if(r)throw a}}}}(t.user);try{for(n.s();!(e=n.n()).done;){var o=e.value,a={self:o.userid==this.user.id,stat:this.RecordJump(o.userid),user:{id:o.userid,name:o.name},raw:t};this.debug("[jump] ".concat(o.name),a),this.emit("jump",a)}}catch(t){n.e(t)}finally{n.f()}}.bind(this)(t):"rem_dj"==e?function(t){var e,n=function(t){var e,n,o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t){if(t){if("string"==typeof t)return y(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?y(t,void 0):void 0}}(t)))return o&&(t=o),e=0,{s:n=function(){},n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,r=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return i=t.done,t},e:function(t){r=!0,a=t},f:function(){try{i||null==o.return||o.return()}finally{if(r)throw a}}}}(t.user);try{for(n.s();!(e=n.n()).done;){var o=e.value,a={self:o.userid==this.user.id,stat:this.RecordDrop(o.userid),user:{id:o.userid,name:o.name},raw:t};this.debug("[drop] ".concat(o.name),a),this.emit("drop",a)}}catch(t){n.e(t)}finally{n.f()}}.bind(this)(t):"nosong"==e||"newsong"==e?function(t){var e=t.room.metadata,n=(e=this.RecordSong(e)).curr,e=e.last,n={none:n.none,name:n.song||"Nothing",artist:n.artist||"No One",self:n.djid==this.user.id,curr:n,last:e,raw:t};this.debug("[song] ".concat(n.name),n),this.emit("song",n)}.bind(this)(t):"snagged"==e?function(t){this.RecordSnag();var e={self:(e=t.userid)==this.user.id,user:{id:e,name:this.getName(e)},raw:t};this.debug("[snag] ".concat(name),e),this.emit("snag",e)}.bind(this)(t):"registered"==e?function(t){var e,n=function(t){var e,n,o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t){if(t){if("string"==typeof t)return w(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?w(t,void 0):void 0}}(t)))return o&&(t=o),e=0,{s:n=function(){},n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,r=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return i=t.done,t},e:function(t){r=!0,a=t},f:function(){try{i||null==o.return||o.return()}finally{if(r)throw a}}}}(t.user);try{for(n.s();!(e=n.n()).done;){var o=e.value,a={user:{id:o.userid,name:o.name},raw:t};this.debug("[join] ".concat(o.name),a),this.emit("join",a)}}catch(t){n.e(t)}finally{n.f()}}.bind(this)(t):"deregistered"==e?function(t){var e,n=function(t){var e,n,o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t){if(t){if("string"==typeof t)return k(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?k(t,void 0):void 0}}(t)))return o&&(t=o),e=0,{s:n=function(){},n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,r=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return i=t.done,t},e:function(t){r=!0,a=t},f:function(){try{i||null==o.return||o.return()}finally{if(r)throw a}}}}(t.user);try{for(n.s();!(e=n.n()).done;){var o=e.value,a={user:{id:o.userid,name:o.name},raw:t};this.debug("[left] ".concat(o.name),a),this.emit("left",a)}}catch(t){n.e(t)}finally{n.f()}}.bind(this)(t):"update_votes"==e?function(t){this.RecordVote(t.room.metadata);var e=(n=function(t){if(Array.isArray(t))return t}(n=(n=t.room.metadata.votelog)[n.length-1])||function(t){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,a=[],i=!0,r=!1;try{for(e=e.call(t);!(i=(n=e.next()).done)&&(a.push(n.value),2!==a.length);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==e.return||e.return()}finally{if(r)throw o}}return a}}(n)||function(t){if(t){if("string"==typeof t)return v(t,2);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?v(t,2):void 0}}(n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],n=n[1],e={id:e,name:this.getName(e)},t={vote:n,user:e,raw:t};this.debug("[vote] ".concat(e.name," (").concat(n,")"),t),this.emit("vote",t)}.bind(this)(t):(this.debug("Unhandled: ".concat(e),t),this.emit(e,{raw:t}))}var Q=function(){this.listener=z.bind(this),window.turntable.addEventListener("message",this.listener)},G=function(){window.turntable.removeEventListener("message",this.listener)};function Y(){function t(){return e.emit("list",i)}var e=this,n=window.playlist.fileids,o=window.playlist.activePlaylist,a=o==this.playlist,i=(this.listing&&clearTimeout(this.listing),{name:o,list:n,curr:a});if(this.playlist=o,!a)return t();this.listing=setTimeout(t,500)}function X(t){t={target:$(t)};this.emit("text",t)}function Z(){this.emit("type",$("#chat-input").val())}function tt(t){t={user:{id:t,name:this.getName(t)}};this.emit("user",t)}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var et=function(){var t=(t=window.MutationObserver)||window.WebKitMutationObserver;this.watcher=new t(function(t){var e,n=function(t){var e,n,o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t){if(t){if("string"==typeof t)return j(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?j(t,void 0):void 0}}(t)))return o&&(t=o),e=0,{s:n=function(){},n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,r=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return i=t.done,t},e:function(t){r=!0,a=t},f:function(){try{i||null==o.return||o.return()}finally{if(r)throw a}}}}(t);try{for(n.s();!(e=n.n()).done;){var o=e.value.target,a=o.className,i="TITLE"==o.nodeName&&0<o.baseURI.indexOf("profile");if(i=i&&o.baseURI.split("profile/")[1])return tt.bind(this)(i);if("songs"==a)return Y.bind(this)();if("messages"==a)return X.bind(this)(o);if("typeahead"==a)return Z.bind(this)()}}catch(t){n.e(t)}finally{n.f()}}.bind(this)),this.watcher.observe(document,{subtree:!0,childList:!0}),this.typing=function(t){return this.emit("type",t.target.value)}.bind(this),this.escaping=function(t){return"Escape"==t.key&&this.emit("esc")}.bind(this),$(document).on("keyup",this.escaping),$("#chat-input").on("input",this.typing)},nt=function(){$("#chat-input").off("input",this.typing),$(document).off("keyup",this.escaping),this.watcher.disconnect()},ot=0,at=function(){var t=function(){this.beat+=1;var t={beat:this.beat};this.emit("loop",t)}.bind(this);this.looped=setInterval(t,6e4)},it=function(){clearInterval(this.looped)};function S(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}function x(o){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach(function(t){var e,n;e=o,n=a[t=t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(a,t))})}return o}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var rt={},st={},ct={},lt=function(t){var e,n=function(t){var e,n,o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t){if(t){if("string"==typeof t)return O(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?O(t,void 0):void 0}}(t)))return o&&(t=o),e=0,{s:n=function(){},n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,r=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return i=t.done,t},e:function(t){r=!0,a=t},f:function(){try{i||null==o.return||o.return()}finally{if(r)throw a}}}}(t.djs);try{for(n.s();!(e=n.n()).done;){var o=e.value;this.RecordJump(o)}}catch(t){n.e(t)}finally{n.f()}this.RecordSong(t)},ut=function(t){var e=t.current_song,n=x({},this.now_playing);return this.last_played=n,this.now_playing=e?x(x({},e.metadata),{},{djid:e.djid,snag:0,yay:t.upvotes,meh:t.downvotes}):{none:!0},n.song&&n.djid&&((e=this.current_djs[n.djid])&&n.yay&&(e.yay+=n.yay),e&&n.meh&&(e.meh+=n.meh),e&&n.snag&&(e.snag+=n.snag),e&&(e.spun+=1)),{curr:this.now_playing,last:this.last_played}},dt=function(t){var e=this.current_djs[t];return this.current_djs[t]=e||{yay:0,meh:0,snag:0,spun:0},this.current_djs[t]},ht=function(t){var e=this.current_djs[t],e=!!e&&x({},e);return e&&delete this.current_djs[t],e},ft=function(t){this.now_playing.yay=t.upvotes,this.now_playing.meh=t.downvotes},bt=function(){this.now_playing.snag+=1},pt=function(){return this.view.becomeDj()},gt=function(){return this.view.quitDj()},mt=function(){return window.turntablePlayer.playEphemeral(UI_SOUND_MENTION)},yt=function(t){return"down"==t?this.click(".lame-button"):this.click(".awesome-button")},vt=function(t){t&&window.turntable.sendMessage({api:"room.speak",text:t,roomid:this.view.roomId,section:this.view.section})},wt=function(t,e){e&&t&&window.turntable.sendMessage({api:"pm.send",receiverid:e,text:t})},kt=function(t,n){var o=this;if(!t||!t.length)return!1;3<t.length?this.post(At):t.forEach(function(t,e){t=t.trim(),e*=100;n?setTimeout(o.mail(t,n),e):setTimeout(o.chat(t),e)})},jt=function(t){var e=t.head,n=t.text,t=t.type;if(!n)return!1;e=$t(e,n,t);$(".chat .messages").append(e),this.view.updateChatScroll()},St=function(t){var e=this.view.userMap[t=t||"Unknown"];if(e)return e.attributes.name;var n=this.core.buddyList.pmWindows;return(e=n&&n[t]?n[t].otherUser:e)?e.attributes.name:t},xt=function(t){var t=t.split(" "),e="@".concat(this.user.attributes.name);return-1<t.indexOf(e)},Ot=function(t,e){var t='.message:contains("'.concat(t,'")'),n='.message:contains("'.concat(e,'")'),e="".concat(t,':contains("').concat(e,'")');return $(e).length?$(e):$(t).length?$(t):$(n).last()},$t=function(t,e,n){return'\n\t<div class="message '.concat(n||"",'">\n\t\t<span class="subject">').concat(t||"",'</span>\n\t\t<span class="text">').concat(e||"","</span>\n\t</div>\n")},At={head:"Too Many Messages!",text:"Can only send up to 3 messages at a time!"},Tt={},Pt=function(t){this.post(t),this.notify(t)},Ct=function(t){var e;if(t.head&&t.text&&this.HasNotify()&&!document.hasFocus())return t.icon||(t.icon=this.icon||""),e=Mt(t),this.SendNotify(e,t.type)},It=function(t,e){var n=this;return e?this.holding[e]?void 0:(this.holding[e]=setTimeout(function(){delete n.holding[e]}.bind(this),5e3),t()):t()},Et=function(){if(!1 in window)return!1;var t=Notification.permission;return"denied"!=t&&("default"==t?this.CanNotify():"permission"in Notification)},Dt=function(){return this.print("Requesting Notifications..."),Notification.requestPermission(),!1},Mt=function(t){var e=t.head,n={body:t.text,icon:t.icon};return function(){var t=new Notification(e,n);t.onclick=function(){window.focus(),t.close()}}},Rt=function(t,e){var n=window.navigator.msSaveBlob;if(n)return n(t);n=window.URL.createObjectURL(t);this.open(n,"tsData.json")},qt=function(t,e){var n=window.document.createElement("a");file&&(n.download=e),n.target="_blank",n.href=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)},Lt=function(t){window.focus();var e={bubbles:!0,cancelable:!0,view:window},t=document.querySelectorAll(t)[0],e=new MouseEvent("click",e);return!t.dispatchEvent(e)},Nt=function(t,e){var n=$("body").hasClass(t);e&&!n&&$("body").addClass(t),!e&&n&&$("body").removeClass(t)},Ht=function(t,e){if(!t||t.indexOf(".js")<0)return!1;var n=!!e&&$("#".concat(e));n&&n.length?n.attr("src",t):document.body.append(Ft(t,e))},_t=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"#",e=1<arguments.length?arguments[1]:void 0,n=("#"!=t&&this.debug("Inserting Stylesheet",{path:t,type:e}),!!e&&$("#".concat(e)));n&&n.length?n.attr("href",t):document.head.append(Jt(t,e))},Bt=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length?arguments[1]:void 0,n=(t&&this.debug("Injecting CSS",{style:t,type:e}),!!e&&$("#".concat(e))[0]);n?n.innerHTML=t:document.head.append(Ut(t,e))},Ft=function(t,e){var n=document.createElement("script");return e&&(n.id=e),n.type="text/javascript",n.src=t,n},Jt=function(t,e){var n=document.createElement("link");return e&&(n.id=e),n.type="text/css",n.rel="stylesheet",n.href=t,n},Ut=function(t,e){var n=document.createElement("style");return e&&(n.id=e),n.type="text/css",n.innerHTML=t,n},Wt=function(){this.__looking=!0,this.print("Finding Turntable..."),this.emit("load")},Vt=function(){return $("#turntable #topBG").length?this.FindLobby():this.core||(window.turntable?(this.core=window.turntable,this.debug("Looking For Room..."),!0):this.FindFail())},Kt=function(){return this.user=window.turntable.user,!(!this.user||(this.view=window.turntable.topViewController,!this.view||!this.view.roomId||(this.room=window.turntable.topViewController.roomView,!this.room||!this.room.roomData||(this.room=this.view.roomData,this.debug("Found Room",this.room),0))))},zt=function(){return this.error("Turntable Not Found"),this.__looking=!1},Qt=function(){return this.print("Attached To Lobby"),this.__looking=!1,this.emit("lobby"),!1};function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var Gt=function(){if(this.__looking||this.Find(),!this.FindTT())return!1;if(!this.FindRoom())return this.Reattach();var t=function(t){if(Array.isArray(t))return t}(t=this.Attached())||function(t){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,a=[],i=!0,r=!1;try{for(e=e.call(t);!(i=(n=e.next()).done)&&(a.push(n.value),2!==a.length);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==e.return||e.return()}finally{if(r)throw o}}return a}}(t)||function(t){if(t){if("string"==typeof t)return A(t,2);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?A(t,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),e=t[0],t=t[1];this.print("Attached to ".concat(e," (").concat(t," Users)")),this.emit("attach",{room:this.room})},Yt=function(){this.debug("Detaching..."),this.UnbindLoop(),this.UnbindWatcher(),this.UnbindListener(),this.print("Detached")},Xt=function(){return this.BindLoop(),this.BindWatcher(),this.BindListener(),this.RecordRoom(this.room.metadata),[this.room.name,this.view.numListeners()]},Zt=function(){var t=this.attach.bind(this);return setTimeout(t,200)},te=function(t){var e,n=t.tools,o=t.events;for(e in Object.assign(this,n),o)this.on(e,o[e])};function T(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}R=function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=this,o=t;if(!(n instanceof o))throw new TypeError("Cannot call a class as a function");Object.assign(this,e),this._ver=f.i8,this.name=this.name||f.u2,this.debug("Initialized")},P&&T(R.prototype,P),D&&T(R,D),Object.defineProperty(R,"prototype",{writable:!1});var P=R;Object.assign(P.prototype,t),Object.assign(P.prototype,e),Object.assign(P.prototype,n),Object.assign(P.prototype,a),Object.assign(P.prototype,i),Object.assign(P.prototype,r),Object.assign(P.prototype,s),Object.assign(P.prototype,c),Object.assign(P.prototype,l),Object.assign(P.prototype,u),Object.assign(P.prototype,d),Object.assign(P.prototype,h);const ee=P,ne=JSON.parse('{"i8":"12.0.0-beta.9"}'),oe=JSON.parse('{"debug":false,"isfan":false,"theme":"dark","color":"","style":"","autobop":true,"use.emojis":true,"use.volume":false,"use.recent":false,"use.stamps":true,"afk.auto":0,"afk.idle":false,"afk.text":"I\'m AFK - Back in a sec!","dj.next":false,"dj.done":false,"dj.after":1,"dj.auto":false,"dj.text":"Hey @user - it\'s your turn!","on.pm":false,"on.song":false,"on.mention":false,"on.text":"","on.exact":true,"post.song":false,"post.spun":false,"post.snag":false,"post.join":false,"post.left":false,"qtbtn1":"Welcome || Welcome to my room!","qtbtn2":"Label || Your Message","qtbtn3":"Label || Message 1 ;; Message 2 ;; Message 3","hb.qtbtn1":false,"hb.qtbtn2":false,"hb.qtbtn3":false,"hb.autobop":true,"hb.afk.idle":true,"hb.dj.next":true,"hb.dj.done":true,"hb.dj.auto":true,"hb.share":true,"hide.people":false,"hide.player":false,"hide.bubble":false,"show.logger":false,"note.on":0,"note.text":"Today\'s theme is: Cool."}'),ae=JSON.parse('{"theme":[{"label":"Theme: Disabled","value":""},{"label":"Theme: Dark Mode","value":"dark"},{"label":"Theme: Night Mode","value":"night"},{"label":"Theme: Cosmic","value":"cosmic"},{"label":"Theme: Forest","value":"forest"},{"label":"Theme: Midnight","value":"midnight"}],"color":[{"label":"Color: Disabled","value":""},{"label":"Color: Blue","value":"blue"},{"label":"Color: Pink","value":"pink"},{"label":"Color: Green","value":"green"},{"label":"Color: Purple","value":"purple"},{"label":"Color: Teal","value":"teal"}],"times":[{"label":"Disabled","value":0},{"label":"15 Minutes","value":15},{"label":"30 Minutes","value":30},{"label":"60 Minutes","value":60},{"label":"90 Minutes","value":90},{"label":"120 Minutes","value":120}],"songs":[{"label":"Escort After: 1 Song","value":1},{"label":"Escort After: 2 Songs","value":2},{"label":"Escort After: 3 Songs","value":3},{"label":"Escort After: 4 Songs","value":4},{"label":"Escort After: 5 Songs","value":5}]}'),ie=JSON.parse('{"6042cdc3c2dbd9001bb37880":{"name":"pxcrisis"},"604207043f4bfc001c3a8704":{"name":"chef_nilo"},"6040dfcd3f4bfc001be4d28c":{"name":"imGrumpy"}}'),re=JSON.parse('{"author":"6042cdc3c2dbd9001bb37880","website":"https://turnstyles.xyz","patreon":"https://patreon.com/pixelcrisis","chrome":"https://chrome.google.com/webstore/detail/turntable-tweaks/pmlkackfnbbnjfejpddpakallilkbdme","firefox":"https://addons.mozilla.org/en-US/firefox/addon/turnstyles-for-turntable-fm/","ttDiscord":"https://discord.gg/jnRs4WnPjM","tsDiscord":"https://discord.gg/wqmAVvgSbE"}'),C=JSON.parse('{"k":[["tf","54fa8f1401e468494b85b537"],["cigrip","54fa8fce01e468494b85b53c"],["datsauce","54fa903b01e468494b85b53f"],["foreveralone","54fa909b01e468494b85b542"],["gaben","54fa90ba01e468494b85b543"],["hailhelix","54fa90f201e468494b85b545"],["shoopdawhoop","54fa932201e468494b85b555"],["m&mjc","54fab45f633595ca4c713abc"],["bttvnice","54fab7d2633595ca4c713abf"],["twat","54fa935601e468494b85b557"],["watchusay","54fa99b601e468494b85b55d"],["tehpolecat","566ca11a65dbbdab32ec0558"],["angelthump","566ca1a365dbbdab32ec055b"],["taxibro","54fbefeb01abde735115de5b"],["brobalt","54fbf00a01abde735115de5c"],["candianrage","54fbf09c01abde735115de61"],["vislaud","550352766f86a5b26c281ba2"],["karappa","550b344bff8ecee922d2a3c1"],["fishmoley","566ca00f65dbbdab32ec0544"],["hhhehehe","566ca02865dbbdab32ec0547"],["kkona","566ca04265dbbdab32ec054a"],["poledoge","566ca09365dbbdab32ec0555"],["sosgame","553b48a21f145f087fc15ca6"],["cruw","55471c2789d53f2d12781713"],["rarepepe","555015b77676617e17dd2e8e"],["hahaa","555981336ba1901877765555"],["feelsbirthdayman","55b6524154eefd53777b2580"],["ronsmug","55f324c47f08be9f0a63cce0"],["kappacool","560577560874de34757d2dc0"],["feelsbadman","566c9fc265dbbdab32ec053b"],["burself","566c9f3b65dbbdab32ec052e"],["concerndoge","566c9f6365dbbdab32ec0532"],["feelsgoodman","566c9fde65dbbdab32ec053e"],["firespeed","566c9ff365dbbdab32ec0541"],["nam","566ca06065dbbdab32ec054e"],["sourpls","566ca38765dbbdab32ec0560"],["feelssnowman","566dde0e65dbbdab32ec068f"],["feelssnowyman","566decae65dbbdab32ec0699"],["sosnowy","567b5b520e984428652809b6"],["saltycorn","56901914991f200c34ffa656"],["monkas","56e9f494fff3cc5c35e5287e"],["vapenation","56f5be00d48006ba34f530a4"],["ariw","56fa09f18eff3b595e93ac26"],["notsquishy","5709ab688eff3b595e93c595"],["feelsamazingman","5733ff12e72c3c0814233e20"],["duckerz","573d38b50ffbf6cc5cc38dc9"],["icecold","5849c9a4f52be01a7ee5f79d"],["sqshy","59cf182fcbe2693d59d7bf46"],["wowee","58d2e73058d8950a875ad027"],["wubtf","5dc36a8db537d747e37ac187"],["cvr","5e76d2ab8c0f5c3723a9a87d"],["cvl","5e76d2d2d112fc372574d222"],["cvhazmat","5e76d338d6581c3724c0f0b2"],["cvmask","5e76d399d6581c3724c0f0b8"],["dogchamp","5ffdf28dc96152314ad63960"],["fubaldi","5f1caf2d713a6144748a2372"],["baomn","5f30ac02fe85fb4472d27d16"],["crawlers","5f30ae9e6f37824466029865"],["checkers","5f30afaa65fe924464efae58"],["kissapregomie","5f30b03d6f37824466029880"],["pettheeddie","5f30b0eacf6d2144653e6f92"],["solarflare","5f30b6c865fe924464efaec9"],["petthebaldie","5f30b844cf6d2144653e6fef"],["raremoon","5f30b90ffe85fb4472d27dce"],["eddieknead","5f30ba4ffe85fb4472d27dda"],["baldfloss","5f30c16f6f37824466029992"],["coomtime","5f30c24ccf6d2144653e70a1"],["humpers","5f30cfc2713a6144748b5028"],["balddab","5f30d8791ab9be446c4eb078"],["baldflick","5f30d8e1cf6d2144653e71b8"],["eddiespin","5f30df5b65fe924464efb0dd"],["feelsayayaman","5f30e087713a6144748b50ce"],["bropls","5f30e22865fe924464efb100"],["eddiebaldmansmash","5f30ebbacf6d2144653e725a"],["moon2bass","5f31e0f68abf185d76c680cf"],["sneakers","5f3c69a6afb6965d6e7c100d"],["catjam","5f41c91bf93bbe5d717f8a09"],["peepoboom","5f4ef4c1aa6fe06bfb5f8df4"],["doubters","5f5ad9080b77be6bfcad897e"],["eekum","5f5c0dc468d9d86c020e58ec"],["moon2scoots","5f6145b16084af6c171a58f9"],["baldyikes","5f6937288d3e1b709d8e731c"],["speeders","5f6e01ec239b210b0de66bca"],["baners","5f76b04eccde1f4a870bf570"],["mariorun","5f79098897f70a4a9be7f410"],["peeponarusprint","5f790a01e016be4a882f04f5"],["flappers","5f791fe1e9c9344a8f34f563"],["twerkers","5f8a6c38473f4802fe4713c6"],["vibers","5f8a6cdf710f8302f0c87068"],["baldspin","5f8a6d0d6f583802e38905dd"],["pettheqynoa","5fae06b5f32aa26441c89258"],["qynoalurks","5fae06df4dfba1644029ccef"],["ayayajam","5fb639f72d6c386f224a0679"],["notsure","5fb640fc2d6c386f224a06cc"],["pepemetal","5fb6414ff096f76f0d1bd1c0"],["peepogolfclap","5fb64523f096f76f0d1bd1f6"],["soulshroom","5fbc901de2900c6f07df72e6"],["pepelepsy","5fc1a3660d141d6f06d87397"],["tanties","5ff0e2539d7d952e405a1e7c"],["shushers","5ff0e27bbe65982e48cf1431"],["baldyappp","5ff0e2c1be65982e48cf143e"],["monaks","5ff0e34c3edf1a2e56b7af2a"],["deskchan","5ff0e4299d7d952e405a1ec3"],["pepw","5ff0e4c5f58a572e54214737"],["lgiggle","5ff0e4faf58a572e54214743"],["shruggers","5ff0e50f3edf1a2e56b7af83"],["pukers","5ff0e51f5ae5852e41549e31"],["peepocheering","5ff0e545f58a572e5421474e"],["prayge","5ff0e5a1f58a572e5421475b"],["yappp","5ff0e6a35ae5852e41549e5f"],["geckw","5ff0e704be65982e48cf14dc"],["komodochomp","5ff0e76cbe65982e48cf14e9"],["omegapoggers","5ff120aaf58a572e54214def"],["peepeegachat","5ff66346644cbf2fc687bff4"],["tinyteeth","5ffd116a30e9273179cdc63f"],["feelsgoogman","5ffd143ac12abd316340578a"],["hypernopers","60016b8dc96152314ad671e5"],["hypernodders","6001f12a3928fb3152de23a7"],["hyperpeepod","60037536c96152314ad6956d"],["pepephoner","600f796f6c75a765d463bdd4"],["peepersd","60172c8b8a320865dcf41961"],["gamba","60172ffbf1cfbf65dbe14586"],["vanish","6032f4bf7c74605395f31f2b"],["copege","6032fa797c74605395f31f5f"],["wicked","6032fab47c74605395f31f61"],["hard","603301507c74605395f31fa1"],["kissabrother","603306de7c74605395f31fbb"],["teatime","60333b0d7c74605395f320ea"],["teatime2","60333b377c74605395f320ec"],["guitartime","6033439f7c74605395f3210f"],["okayge","603349ea7c74605395f32129"],["click","60334fb57c74605395f32152"],["easy","603461887c74605395f329e6"],["peeposteer","6035a63a7c74605395f33357"],["gawkgawk","605008f0306b602acc59dbb9"],["mahalo","605a6e997493072efdeb3476"],["wowers","6063a39fa407570b72f282c7"],["aaugh","6063aa98a407570b72f28321"],["peepees","6063b0c3a407570b72f2837a"],["noted","60665f35a407570b72f296a0"],["robpls","606fc2ce39b5010444cfbb8c"],["refracting","609f0faf67644f1d67e86529"],["grumpge","60a7548f67644f1d67e8a27f"],["eato","60b44a3ff8b3f62601c35f26"],["deadlole","60e10bf58ed8b373e421d4a8"],["corpa","6121e47e76ea4e2b9f78a35f"],["peeposhy","6126e9e8af28e956864a23bf"],["borpau","612d6dc1af28e956864b0fac"],["slap","6132f9c3af28e956864bd1b2"],["kachorpa","6136f959af28e956864c563f"],["geckpog","615b961fb63cc97ee6d4dc42"],["elyouel","61871d291f8ff7628e6cc518"],["hunger","61eb460806fd6a9f5be1a098"],["potl","6222a4be06fd6a9f5be6348a"]],"i":[["jkanstyle",15],["optimizeprime",16],["stonelightning",17],["theringer",18],["redcoat",22],["kappa",25],["joncarnage",26],["mrdestructoid",28],["bcwarrior",30],["gingerpower",32],["dansgame",33],["swiftrage",34],["pjsalt",36],["kevinturtle",40],["kreygasm",41],["ssssss",46],["punchtrees",47],["arsonnosexy",50],["smorc",52],["frankerz",65],["onehand",66],["bloodtrail",69],["dbstyle",73],["asianglow",74],["biblethump",86],["shazbotstix",87],["pmstwin",92],["fungineer",244],["residentsleeper",245],["4head",354],["hotpokket",357],["failfish",360],["daesuppy",973],["wholewheat",1896],["thunbeast",1898],["tf2john",1899],["ralpherz",1900],["kippa",1901],["keepo",1902],["bigbrother",1904],["sobayed",1906],["peopleschamp",3412],["grammarking",3632],["panicvis",3668],["anele",3792],["brokeback",4057],["pipehype",4240],["youwhy",4337],["ritzmitz",4338],["elegiggle",4339],["thething",7427],["hassaanchop",20225],["babyrage",22639],["panicbasket",22998],["permasmug",27509],["buddhabar",27602],["wutface",28087],["prchase",28328],["mau5",30134],["heyguys",30259],["notatk",34875],["mcat",35063],["ttours",38436],["praiseit",38586],["corgiderp",49106],["argieb8",51838],["shadylulu",52492],["kappapride",55338],["coolcat",58127],["dendiface",58135],["notlikethis",58765],["ripepperonis",62833],["dududu",62834],["bleedpurple",62835],["twitchraid",62836],["seemsgood",64138],["minglee",68856],["kappaross",70433],["kappaclaus",74510],["ohmydog",81103],["osfrog",81248],["serioussloth",81249],["komodohype",81273],["vohiyo",81274],["mikehogu",81636],["kappawealth",81997],["cmonbruh",84608],["smoocherz",89945],["nomnom",90075],["stinkycheese",90076],["cheffrank",90129],["futureman",98562],["opieop",100590],["doritoschip",102242],["pjsugar",102556],["voteyea",106293],["votenay",106294],["rulefive",107030],["dxcat",110734],["drinkpurple",110785],["tinyface",111119],["picomause",111300],["thetarfu",111351],["datsheffy",111700],["unsane",111792],["copythis",112288],["pastathat",112289],["imglitch",112290],["giveplz",112291],["takenrg",112292],["blargnaut",114738],["dogface",114835],["jebaited",114836],["toospicy",114846],["wtruck",114847],["unclenox",114856],["raccattack",114870],["strawbeary",114876],["primeme",115075],["brainslug",115233],["batchest",115234],["curselit",116625],["poooound",117484],["freakinstinkin",117701],["supervinlin",118772],["trihard",120232],["coolstorybob",123171],["itsboshytime",133468],["kapow",133537],["youdontsay",134254],["uwot",134255],["rlytho",134256],["partytime",135393],["ninjagrumpy",138325],["mvgame",142140],["tbangel",143490],["theilluminati",145315],["morphintime",156787],["thankegg",160392],["begwan",160394],["bigphish",160395],["inuyoface",160396],["kappu",160397],["koncha",160400],["punoko",160401],["sabaping",160402],["tearglove",160403],["tehepelo",160404],["twitchlit",166263],["carlsmile",166266],["crreamawk",191313],["squid1",191762],["squid2",191763],["squid3",191764],["squid4",191767],["twitchunity",196892],["tpcrunchyroll",323914],["entropywins",376765],["lul",425618],["powerupr",425671],["powerupl",425688],["hscheers",444572],["hswp",446979],["darkmode",461298],["twitchvotes",479745],["tpfufun",508650],["redteam",530888],["greenteam",530890],["purplestar",624501],["fbtouchdown",626795],["popcorn",724216],["tombraid",864205],["earthday",959018],["partyhat",965738],["mercywing1",1003187],["mercywing2",1003189],["pinkmercy",1003190],["bisexualpride",1064987],["lesbianpride",1064988],["gaypride",1064991],["transgenderpride",1064995],["asexualpride",1130348],["pansexualpride",1130349],["twitchrpg",1220086],["intersexpride",1221184],["maxlol",1290325],["nonbinarypride",1297279],["genderfluidpride",1297281],["fbrun",1441261],["fbpass",1441271],["fbspiral",1441273],["fbblock",1441276],["fbcatch",1441281],["fbchallenge",1441285],["fbpenalty",1441289],["pixelbob",1547903],["gunrun",1584743],["holidaycookie",1713813],["holidaylog",1713816],["holidayornament",1713818],["holidaypresent",1713819],["holidaysanta",1713822],["holidaytree",1713825],["soonerlater",2113050],["twitchsings",300116344],["singsmic",300116349],["singsnote",300116350],["porschewin",300745158],["bop",301428702],["virtualhug",301696583],["extralife",302426269],["blacklivesmatter",302537250],["football",302628600],["footyellow",302628613],["footgoal",302628617],["showofhands",303564554],["glitchcat",304486301],["stinkyglitch",304486324],["glitchlit",304489128],["glitchnrg",304489309],["pogchamp",305954156]]}');var se="Share turnStyles in the room chat?",ce="Oops! turnStyles is broken!\nIf this is a bookmarklet, you may need to update it.\nVisit the turnStyles website at turnstyles.xyz to update!\nClicking OK will attempt to open the update in a new tab.";const le={tools:{onOff:function(t){return t?"On":"Off"},capStr:function(t){return t[0].toUpperCase()+t.substring(1)},strArr:function(t){return t.split(1<arguments.length&&void 0!==arguments[1]?arguments[1]:" ").map(function(t){return t.trim()})},getTime:function(){return(new Date).toLocaleTimeString("en-US").split(":").splice(0,2).join(":")},getLink:function(t,e){var n="?v=".concat(Math.random()),e=e?"".concat(e,"/").concat(t):t;return t?"".concat(this.base,"/").concat(e).concat(n):"#"},prefix:function(t,e){e=e||!1;return t.indexOf("||")<0?[e,t]:[e=(t=t.split("||")).shift().trim(),t.join("").trim()]},update:function(){var t=this.strings.website;window.confirm(ce)&&this.open(t)},reload:function(){this.detach(),this.print("Reloading..."),$('script[src*="turnStyles.js"]').remove(),window.localStorage.setItem("tsBase",this.base),this.insertScript(this.getLink("turnStyles.js"))},share:function(){window.confirm(se)&&(this.hidePanel(),this.batch(["Check out turnStyles!","Autobop, Emojis, Themes, & More!","https://turnstyles.xyz"]))}}};var ue="#ts_core, #ts_themes, #ts_colors, #ts_style";const de={tools:{addTheme:function(t){this.bodyClass("th-none",!t);var e=$("body").data("theme");e&&$("body").removeClass("th-".concat(e)),t&&$("body").addClass("th-".concat(t)),$("body").data("theme",t),this.addSheet(t,"themes")},addSheet:function(t,e){t=!!t&&"".concat(t,".css"),t=this.getLink(t,e),e="ts_".concat(e||"core");this.insertSheet(t,e)},addStyle:function(t){this.injectStyle(t,"ts_style")}},events:{data:function(t){$(ue).remove(),this.addSheet("turnStyles"),this.addTheme(t.theme),this.addSheet(t.color,"colors"),this.addStyle(t.style)},save:function(t,e){"style"==t&&this.addStyle(e),"theme"==t&&this.addTheme(e),"color"==t&&this.addSheet(e,"colors")}}};function I(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}function E(o){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach(function(t){var e,n;e=o,n=a[t=t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(a,t))})}return o}var D={tools:{get:function(t){t=this.config[t];return"boolean"==typeof t||isNaN(t)||""==t?t:parseInt(t)},set:function(t,e){this.config[t]=e,this.debug("Set [".concat(t,"] to (").concat(e,")"));var n=JSON.stringify(this.config);window.localStorage.setItem("tsData",n),window.postMessage({tsData:n}),this.syncPanel(t,e)},conf:function(t){try{t=JSON.parse(t)}catch(e){return this.debug("Invalid Config",t)}var e=t&&"theme"in t;return e&&this.debug("Loaded Config",t),!!e&&t}},events:{load:function(){var t=this.conf(this.data)||{},e=this.conf(this.data)||{};this.migrate(E(E({},e),t)),this.set("afk.idle",!1),this.set("dj.next",!1),this.emit("data",this.config)}}};function M(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}var he=function(t){return new Blob([t],{type:"text/json"})},fe='WARNING: This will reset your turnStyles Data! \nClicking "OK" will reset turnStyles to default and reload the extension!\nClick "CANCEL" if this is not what you intended to do!',be='WARNING: This will DELETE the turnStyles DATABASE!\nTHIS WILL RELOAD THE WEB PAGE! USE AS A LAST RESORT!\nClick "OK" to delete the turnStyles DB and start over!\nClick "CANCEL" to go back to turntable!',R={tools:{backupData:function(){var t=JSON.stringify(this.config),t=he(t);return this.download(t,"tsData.json")},uploadData:function(){var t=$("#tsBackup input")[0].files[0];if(!t)return alert("Select Backup File!");this.debug("Restoring Backup...");var e=new FileReader;e.onload=this.restoreData.bind(this),e.readAsText(t)},restoreData:function(t){t=this.conf(t.target.result);if(!t)return alert("Invalid Backup File");this.migrate(t)},refreshData:function(){window.confirm(fe)&&(this.config=function(o){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(Object(a),!0).forEach(function(t){var e,n;e=o,n=a[t=t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(a,t))})}return o}({},this.default))},destroyData:function(){window.confirm(be)&&(window.localStorage.removeItem("tsData"),window.localStorage.setItem("tsWipe",!0),window.location.reload())}}};function pe(e,t){var n,o=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)),o}var ge=function(t){return isNaN(t)?10:parseInt(t)},me=[{old:"style",new:"color"},{old:"u_css",new:"style"},{old:"auto_b",new:"autobop"},{old:"emojis",new:"use.emojis"},{old:"volume",new:"use.volume"},{old:"played",new:"use.recent"},{old:"stamps",new:"use.stamps"},{old:"logger",new:"use.logger"},{old:"people",new:"hide.people"},{old:"player",new:"hide.player"},{old:"bubble",new:"hide.bubble"},{old:"afkmax",new:"afk.auto"},{old:"afkstr",new:"afk.text"},{old:"auto_q",new:"dj.auto"},{old:"q_text",new:"dj.text"},{old:"qtbtn1",new:"qtbtn1",sub:"qtbtns"},{old:"qtbtn2",new:"qtbtn2",sub:"qtbtns"},{old:"qtbtn3",new:"qtbtn3",sub:"qtbtns"},{old:"post",new:"note.on",sub:"timing"},{old:"text",new:"note.text",sub:"timing"},{old:"chat",new:"on.pm",sub:"notify"},{old:"song",new:"on.song",sub:"notify"},{old:"text",new:"on.text",sub:"notify"},{old:"ding",new:"on.mention",sub:"notify"},{old:"song",new:"post.song",sub:"alerts"},{old:"spun",new:"post.spun",sub:"alerts"},{old:"snag",new:"post.snag",sub:"alerts"},{old:"join",new:"post.join",sub:"alerts"},{old:"left",new:"post.left",sub:"alerts"},{old:"qtbtn1",new:"hb.qtbtn1",sub:"hotbar"},{old:"qtbtn2",new:"hb.qtbtn2",sub:"hotbar"},{old:"qtbtn3",new:"hb.qtbtn3",sub:"hotbar"},{old:"auto_b",new:"hb.autobop",sub:"hotbar"},{old:"is_afk",new:"hb.afk.idle",sub:"hotbar"},{old:"nextdj",new:"hb.dj.next",sub:"hotbar"},{old:"escort",new:"hb.dj.done",sub:"hotbar"},{old:"auto_q",new:"hb.dj.auto",sub:"hotbar"},{old:"shared",new:"hb.share",sub:"hotbar"}],t={tools:{migrate:function(t){this.config=function(o){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(a),!0).forEach(function(t){var e,n;e=o,n=a[t=t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):pe(Object(a)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(a,t))})}return o}({},this.default);var e=window.localStorage.getItem("tsdb");e&&(t=JSON.parse(e)),e&&window.localStorage.removeItem("tsdb"),ge(t.version)<12?this.upgrade(me,t):this.refresh(t),this.set("version",12)},upgrade:function(t,n){var o=this;t.forEach(function(t){var e;t.sub&&!n[t.sub]||!t.sub&&!t.old in n||t.sub&&!t.old in n[t.sub]||(e=n[t.sub||t.old],t.sub&&(e=e[t.old]),o.set(t.new,e))})},refresh:function(t){for(var e in t){if(!t in this.config)return;this.set(e,t[e])}}}},e={showPanel:function(){return $("#tsWindow").addClass("active")},hidePanel:function(){return $("#tsWindow").removeClass("active")},syncPanel:function(t,e){var n="boolean"==typeof e?"checked":"value";$('*[data-opt="'.concat(t,'"]')).prop(n,e)},savePanel:function(t){t=this.findPanel(t);t&&(this.set(t.key,t.val),this.emitPanel(t.key)&&this.emit("save",t.key,t.val))},findPanel:function(t){var e,n,o=t.target.dataset;if(o.opt||o.for)return e=o.for||o.opt,n="checkbox"!=t.target.type,t=t.target[n?"value":"checked"],{key:e,val:t=o.for?$('*[data-opt="'.concat(e,'"]')).val():t}},emitPanel:function(){if(!this.lobby)return!0;var t=["theme","color","style"].includes(key);return(t=(t=(t=t||0===key.indexOf("hb."))||0===key.indexOf("hide."))||0===key.indexOf("show."))||0===key.indexOf("qtbtn")}};const ye={tools:e,events:{esc:e.hidePanel}};function ve(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}const we={tools:{$a:function(t,e,n){var o='class="ts-button" target="_blank"';return n&&(o+=' id="'.concat(n,'"')),e&&(o+=' href="'.concat(e,'"')),"<a ".concat(o,">").concat(t,"</a>")},$btn:function(t,e,n,o){var a='class="ts-button"';return o&&(a+=' id="'.concat(o,'"')),e&&(a+=' data-for="'.concat(e,'"')),n&&(a+=' onclick="$ts.'.concat(n,'()"')),"<button ".concat(a,">").concat(t,"</button>")},$bool:function(t,e,n){var o=this.get(e),a='type="checkbox"',i='class="ts-button ts-toggle"',n=(n&&(i+=' id="'.concat(n,'"')),e&&(a+=' data-opt="'.concat(e,'"')),o&&(a+=" checked"),"<input ".concat(a," /><span></span>"));return"<label ".concat(i,"> ").concat(n," ").concat(t,"</label>")},$str:function(t,e){var n=this.get(e),t=this.$btn(t,e),o='type="text" class="ts-inputs"';return e&&(o+='data-opt="'.concat(e,'"')),e&&(o+='value="'.concat(n,'"')),"<input ".concat(o," /> ").concat(t)},$text:function(t,e){var n=this.get(e),t=this.$btn(t,e),o='rows="10" class="ts-inputs"';return e&&(o+=' data-opt="'.concat(e,'"')),"<textarea ".concat(o,">").concat(n,"</textarea> ").concat(t)},$list:function(t,e){var n=this,o=this.get(t),a=this.options[e||t],e=Object.keys(a).map(function(t){return n.$item(a[t],o)}),i='class="ts-button ts-choice"';return t&&(i+=' data-opt="'.concat(t,'"')),"<select ".concat(i,">").concat(e,"</select>")},$item:function(t,e){var n=t.label,t=t.value,e=t==e,t='value="'.concat(t,'"');return e&&(t+=" selected"),"<option ".concat(t,">").concat(n,"</option>")},$qt:function(t){var e="qtbtn".concat(t),n=this.get(e),t=(function(t){if(Array.isArray(t))return t}(n=this.prefix(n,"QT".concat(t)))||function(t){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,a=[],i=!0,r=!1;try{for(e=e.call(t);!(i=(n=e.next()).done)&&(a.push(n.value),1!==a.length);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==e.return||e.return()}finally{if(r)throw o}}return a}}(n)||function(t){if(t){if("string"==typeof t)return ve(t,1);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?ve(t,1):void 0}}(n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return this.$btn(t,!1,e,e)}}};var n={loadHotbar:function(){$(Se).remove(),$(ke).append(this.makeHotbar()),$(je).first().before(Ae()),$(xe).on("change",this.savePanel.bind(this)),$(Oe).on("click",this.savePanel.bind(this)),$(".ts-menu").on("click",this.showPanel),this.bodyClass("hb-qtbtn1",!this.get("hb.qtbtn1")),this.bodyClass("hb-qtbtn2",!this.get("hb.qtbtn2")),this.bodyClass("hb-qtbtn3",!this.get("hb.qtbtn3")),this.bodyClass("hb-dj-auto",!this.get("hb.dj.auto")),this.bodyClass("hb-dj-next",!this.get("hb.dj.next")),this.bodyClass("hb-dj-done",!this.get("hb.dj.done")),this.bodyClass("hb-autobop",!this.get("hb.autobop")),this.bodyClass("hb-afk-idle",!this.get("hb.afk.idle")),this.bodyClass("hb-share",!this.get("hb.share"))},saveHotbar:function(t){0===t.indexOf("qt")&&0===t.inedxOf("hb")&&this.loadHotbar()},makeHotbar:function(){return $e(this.icon,"\n      ".concat(this.$bool("AFK","afk.idle","hbIdle"),"\n      ").concat(this.$bool("Autobop","autobop","hbBop"),"\n      ").concat(this.$bool("AutoQueue","dj.auto","hbAutoDJ"),"\n      ").concat(this.$bool("Next DJ","dj.next","hbNextDJ"),"\n      ").concat(this.$bool("Escort","dj.done","hbDoneDJ"),"\n      ").concat(this.$qt("1")," ").concat(this.$qt("2")," ").concat(this.$qt("3"),"\n      ").concat(this.$btn("Share",!1,"share","hbShare"),"\n    "))}},ke=".header-bar",je="#settings .dropdown ul li",Se="#tsHotbar, .ts-menu",xe="#tsHotbar *[data-opt]",Oe="#tsHotbar *[data-for]",$e=function(t,e){return'\n  <div id="tsHotbar">\n    <div class="wrap">\n      <span id="tsMenu" class="ts-menu">☰</span>\n      <img src="'.concat(t,'" id="tsLogo" class="ts-menu">\n      ').concat(e,"\n    </div>\n  </div>\n")},Ae=function(){return'\n  <li class="option link ts-menu">\n    <a><strong><em>turnStyles Config</em></strong></a>\n  </li>\n'};const Te={tools:n,events:{save:n.saveHotbar,lobby:n.loadHotbar,attach:n.loadHotbar}},Pe={tools:{moveTabs:function(t){t=t.target.dataset.tab;$("#tsPanels .active").removeClass("active"),$('*[data-tab="'.concat(t,'"]')).addClass("active")},listTabs:function(){return"<nav>".concat(this.tabs.map(function(t){var e='data-tab="'.concat(t.name,'"'),n='class="ts-tab '.concat(t.active&&"active",'"');return"<div ".concat(e," ").concat(n,">").concat(t.name,"</div>")}).join(""),"</nav>")},makeTabs:function(){var o=this;return this.tabs.map(function(t){var e=t.make.bind(o),n='data-tab="'.concat(t.name,'"'),t=t.active?"active":"",t='class="ts-tabbed '.concat(t,'"');return"<div ".concat(n," ").concat(t,">").concat(e(),"</div>")}).join("")},tabs:[{name:"Room",make:function(){return"\n  <section>\n    <article>\n      ".concat(this.$bool("Autobop","autobop"),'\n      <p>Auto vote "awesome" when a new song starts.</p>\n    </article>\n\n    <article class="ts-help">\n      ').concat(this.$bool("Move Volume","use.volume"),'\n      <p>Moves volume to the header, adds temporary mute - unmutes after the current song.</p>\n    </article>\n\n    <article class="ts-help">\n      ').concat(this.$bool("Recently Played","use.recent"),'\n      <p>Highlights songs in your playlist that were recently played in the room.</p>\n    </article>\n\n    <article class="ts-help">\n      <strong>Reminder:</strong> \n      ').concat(this.$list("note.on","times"),"\n      <p>Send text to the room at a selected interval. Useful for posting recurring information like rules, themes, or whatever!</p>\n      ").concat(this.$str("Save Reminder","note.text"),'\n    </article>\n  </section>\n\n  <section>\n    <article class="ts-help">\n      ').concat(this.$bool("Add More Emojis","use.emojis"),'\n      <p>Adds more emojis to the :emoji: syntax. Currently sourced from Twitch and BTTV. Note: Only visible to other turnStyles users, and disables the :P emoji!</p>\n    </article>\n\n    <article class="ts-help">\n      ').concat(this.$bool("Chat Timestamps","use.stamps"),"\n      <p>We all get distracted - turnStyles will add timestamps to all user messages in chat so you know when a message was sent.</p>\n    </article>\n\n    <article>\n      ").concat(this.$bool("Hide Chat Bubbles","hide.bubble"),"\n      <p>Toggles speech bubbles from the audience.</p>\n    </article>\n\n    <article>\n      ").concat(this.$bool("Hide Room Audience","hide.people"),"\n      <p>Toggles the avatars on the room floor.</p>\n    </article>\n\n    <article>\n      ").concat(this.$bool("Hide Video Player","hide.player"),"\n      <p>Toggles the video player in the background.</p>\n    </article>\n  </section>")},active:!0},{name:"Style",make:function(){return'\n  <section>\n    <article class="ts-help">\n      '.concat(this.$list("theme"),'\n      <p>Changes the overall appearance of turntable.</p>\n    </article>\n  </section>\n\n  <section>\n    <article class="ts-help">\n      ').concat(this.$list("color"),'\n      <p>Changes just the gold/accent color of turntable.</p>\n    </article>\n  </section>\n\n  <section class="full">\n    <article class="ts-help">\n      <strong>Custom CSS</strong>\n      <p>Want to add your own tweaks? Add any CSS snippet here and turnStyles will inject it into turntable for you!</p>\n      ').concat(this.$text("Save & Apply Styles","style"),"\n    </article>\n  </section>")}},{name:"DJ + AFK",make:function(){return'\n  <section>\n    <article class="ts-help">\n      '.concat(this.$bool("Enable Next DJ","dj.next"),'\n      <p>Auto jump up after the next DJ drops!</p>\n    </article>\n\n    <article class="ts-help">\n      ').concat(this.$bool("Escort After Play","dj.done"),'\n      <p style="margin-bottom: 5px">Auto jump down after your next x track(s)!</p>\n      ').concat(this.$list("dj.after","songs"),'\n    </article>\n    \n    <article class="ts-help">\n      ').concat(this.$bool("Enable AutoQueue","dj.auto"),"\n      <p>Jump on deck when pinged by a bot!</p>\n      ").concat(this.$str("Save Queue Ping","dj.text"),'\n    </article>\n  </section>\n\n  <section>\n    <article class="ts-help">\n      <strong>AFK Response</strong>\n      <p>The message sent when Currently AFK or pinged while AFK.</p>\n      ').concat(this.$str("Save AFK Response","afk.text"),'\n    </article>\n\n    <article class="ts-help">\n      <strong>AFK Timer:</strong> \n      ').concat(this.$list("afk.auto","times"),"\n      <p>Marks you AFK automatically based on your chat activity!</p>\n    </article>\n\n    <article>\n      ").concat(this.$bool("Currently AFK","afk.idle"),"\n      <p>When enabled, sends your AFK Response to the room chat, and again if you're pinged when away!\n    </article>\n  </section>\n")}},{name:"Hotbar",make:function(){return'\n  <section>\n    <article class="ts-help">\n      '.concat(this.$bool("Enable QuickText 1","hb.qtbtn1"),"\n      <p>Send messages with HotBar buttons!</p>\n      ").concat(this.$str("Save QuickText 1","qtbtn1"),'\n    </article>\n\n    <article class="ts-help">\n      ').concat(this.$bool("Enable QuickText 2","hb.qtbtn2"),"\n      <p>Prefixing with <strong>||</strong> adds a label!</p>\n      ").concat(this.$str("Save QuickText 2","qtbtn2"),'\n    </article>\n\n    <article class="ts-help">\n      ').concat(this.$bool("Enable QuickText 3","hb.qtbtn3"),"\n      <p>Use <strong>;;</strong> to send up to three messages!</p>\n      ").concat(this.$str("Save QuickText 3","qtbtn3"),"\n    </article>\n  </section>\n  <section>\n    <article>\n      ").concat(this.$bool("AFK Button","hb.afk.idle"),"\n      <p>Toggles button visibility in the HotBar.</p>\n    </article>\n    <article>\n      ").concat(this.$bool("Autobop Button","hb.autobop"),"\n      <p>Toggles button visibility in the HotBar.</p>\n    </article>\n    <article>\n      ").concat(this.$bool("AutoQueue Button","hb.dj.auto"),"\n      <p>Toggles button visibility in the HotBar.</p>\n    </article>\n    <article>\n      ").concat(this.$bool("Next DJ Button","hb.dj.next"),"\n      <p>Toggles button visibility in the HotBar.</p>\n    </article>\n    <article>\n      ").concat(this.$bool("Escort Button","hb.dj.done"),"\n      <p>Toggles button visibility in the HotBar.</p>\n    </article>\n    <article>\n      ").concat(this.$bool("Chat Bubble Toggle","hb.bubble"),"\n      <p>Toggles button visibility in the HotBar.</p>\n    </article>\n    <article>\n      ").concat(this.$bool("Audience Toggle","hb.people"),"\n      <p>Toggles button visibility in the HotBar.</p>\n    </article>\n    <article>\n      ").concat(this.$bool("Player Toggle","hb.player"),"\n      <p>Toggles button visibility in the HotBar.</p>\n    </article>\n    <article>\n      ").concat(this.$bool("Share turnStyles","hb.share"),"\n      <p>Toggles button visibility in the HotBar.</p>\n    </article>\n  </section>\n")}},{name:"Alerts",make:function(){return'\n  <section>\n    <article class="ts-help">\n      <strong>Desktop Notifications</strong>\n      <p>Sends a Desktop Notification when you aren\'t looking at turntable, and one of the selected events occurs.</p>\n      '.concat(this.$bool("On New PMs","on.pm"),"\n      ").concat(this.$bool("On Mentions","on.mention"),"\n      ").concat(this.$bool("On New Songs","on.song"),'\n    </article>\n\n    <article class="ts-help">\n      <strong>Hot Words</strong>\n      <p>Mention/Notify on word/phrase match in chat. Use multiple words and phrases in a comma separated list.</p>\n      ').concat(this.$str("Save Hot Words","on.text"),'\n    </article>\n  </section>\n\n  <section>\n    <article class="ts-help">\n      <strong>Alerts In Chat</strong>\n      <p>These are posted in chat as a fake message, only visible to you. Meant to keep you up to date on the room.</p>\n      ').concat(this.$bool("On User Join","post.join"),"\n      ").concat(this.$bool("On User Leave","post.left"),"\n      ").concat(this.$bool("On Song Snags","post.snag"),"\n      ").concat(this.$bool("Last Song Stats","post.song"),"\n      ").concat(this.$bool("Last DJ's Stats","post.spun"),'\n    </article>\n\n    <article class="ts-help">\n      ').concat(this.$bool("Enable Hot Word Exact Match","on.exact"),'\n      <p>Enabled: "heyy" will not trigger "hey".</p>\n      <p>Disabled: "heyy" will trigger "hey".</p>\n    </article>\n  </section>\n')}},{name:"Help",make:function(){return"\n  <section>\n    <article>\n      ".concat(this.$bool("Print Debug Logs In Console","debug"),"\n      <p>The output of turnStyles will be printed into the browser dev console. Helpful for finding out why things aren't working.</p>\n    </article>\n\n    <article>\n      ").concat(this.$bool("Show Logbook In Room Tab","show.logger"),'\n      <p>This adds a running log of what\'s happened in your room and with turnStyles, printed neatly in the Room Tab.</p>\n    </article>\n\n    <article class="ts-help">\n      <strong>Reload turnStyles</strong>\n      <p>Removes turnStyls from the room and re-injects it. Useful for updating a bookmarklet or debugging.</p>\n      ').concat(this.$btn("Reload turnStyles",0,"reload"),'\n    </article>\n\n    <article class="ts-help">\n      <strong>Reload Music Players</strong>\n      <p>Disables and Re-Enabled the music players in an attempt to unstick them when broken.</p>\n      ').concat(this.$btn("Reload Players",0,"reloadMusic"),'\n    </article>\n  </section>\n\n  <section>\n    <article class="ts-data ts-help">\n      <strong>turnStyles Data</strong>\n      <p>If something goes wrong or you need to start over, you can reset/restore/backup your data here!</p><br>\n      ').concat(this.$btn("Backup Data",0,"backupData"),'\n      <label id="tsBackup" class="ts-button">\n        <input type="file"> Restore Data\n      </label><br>\n      ').concat(this.$btn("Reset To Default",0,"resetData"),"\n      ").concat(this.$btn("Delete All Data",0,"deleteData"),'\n    </article>\n\n    <article class="ts-help">\n      <strong>On Discord</strong>\n      <p>You can find the author (and other active users) in the discords below.</p>\n      ').concat(this.$a("turnStyles Discord",this.strings.tsDiscord),"\n      ").concat(this.$a("turntable.fm Discord",this.strings.ttDiscord),"\n    </article>\n  </section>\n")}},{name:"About",make:function(){return'\n  <section>\n    <article class="ts-help">\n      <strong>About turnStyles</strong>\n      <p>\n        version: '.concat(this.version,"<br>\n        user id: ").concat(this.user?this.user.id:"",'\n      </p>\n    </article>\n\n    <article class="fan">\n      ').concat(this.$bool("Fan The Developer","isfan"),"\n      <p>With this enabled, you'll automatically fan @crisis on turntable - allowing you to track him down when he's online and pester him with questions!</p>\n    </article>\n\n    <article class=\"ts-help\">\n      <strong>About The Developer</strong>\n      <p>turnStyles was made by pixelcrisis, who goes by <em>@crisis</em> on both Discord and turntable.fm</p>\n      <p><em>I have a full time job and do this as a hobby - if you want to support turnStyles, consider joining the Patreon! By becoming a patron, you get some swag in chat visible to other turnStyles users!</em></p>\n      <p>").concat(this.$a("Support turnStyles On Patreon!",this.strings.patreon,"tsGold"),'</p>\n    </article>\n  </section>\n  \n  <section>\n    <article class="ts-help">\n      <strong>Share turnStyles</strong>\n      <p>This will send a message to the room chat with a little description and a link to the turnStyles website! Use this to quickly share if someone wants to install the extension!</p>\n      ').concat(this.$btn("Share turnStyles In Chat!",0,"share"),'\n    </article>\n\n    <article class="ts-help ts-links">\n      <strong>Links</strong>\n      <p>These are links to the website (bookmarklets!) and other places you can get turnStyles.</p>\n      ').concat(this.$a("turnStyles Website",this.strings.website),"\n      ").concat(this.$a("As A Firefox Addon",this.strings.firefox),"\n      ").concat(this.$a("In The Chrome Store",this.strings.chrome),"\n    </artice>\n  </section>\n")}}]}};var a={loadWindow:function(){$("#tsWindow").remove(),$("body").append(this.makeWindow()),$(".ts-tab").on("click",this.moveTabs),$("#tsClose").on("click",this.hidePanel),$(Ce).on("click",this.toggleHelp),$("#tsWindow").on("click",this.hideWindow.bind(this)),$(Ie).on("change",this.uploadData.bind(this)),$(Ee).on("change",this.savePanel.bind(this)),$(De).on("click",this.savePanel.bind(this))},hideWindow:function(t){t.target==t.currentTarget&&this.hidePanel()},toggleHelp:function(t){"ARTICLE"==t.target.nodeName&&$(t.target).toggleClass("ts-help")},makeWindow:function(){return Me(this.icon,"\n      ".concat(this.listTabs()).concat(this.makeTabs(),"\n    "))}},Ce="#tsPanels article",Ie="#tsBackup input",Ee="#tsPanels *[data-opt]",De="#tsPanels *[data-for]",Me=function(t,e){return'\n  <div id="tsWindow">\n    <div id="tsPanels">\n      <header>\n        <img id="tsLogo2" src="'.concat(t,'">\n        <h2>turnStyles Config</h2><span id="tsClose">✖</span>\n      </header>\n      ').concat(e,"\n    </div>\n  </div>\n")};const Re={tools:a,events:{lobby:a.loadWindow,attach:a.loadWindow}},qe={events:{data:function(t){this.bodyClass("ts-recent",t["use.recent"]),this.bodyClass("ts-logger",t["show.logger"]),this.bodyClass("ts-no-bub",t["hide.bubble"]),this.bodyClass("ts-no-vid",t["hide.player"]),this.bodyClass("ts-no-ppl",t["hide.people"]),this.debugging=t.debug},save:function(t,e){"use.recent"==t&&this.bodyClass("ts-recent",e),"show.logger"==t&&this.bodyClass("ts-logger",e),"hide.bubble"==t&&this.bodyClass("ts-no-bub",e),"hide.player"==t&&this.bodyClass("ts-no-vid",e),"hide.people"==t&&this.bodyClass("ts-no-ppl",e),"debug"==t&&(this.debugging=e)}}};var Le=function(t,e){return e?t.player[0].getCurrentTime():t.player.currentTime()/1e3};const Ne={tools:{syncPlayers:function(){var t,e=window.youtube,n=window.soundcloudplayer;(e.song||n.song)&&(n=e.song?e:n,t=Le(n,e.song),e=Date.now()-(e.song?3e3:1e3),n.songTime=t,n.previewStartTime=e,n.resumeSong(n.song),this.hidePanel())}}};var i={showVol:function(){$(_e).append(Fe()),$(He).on("click",this.muteVol.bind(this)),$(q).on("input",this.saveVol.bind(this)),$(q).on(Be,this.rollVol.bind(this)),this.debug("Replaced Volume")},hideVol:function(){$("#tsVolume").remove(),this.debug("Restored Volume")},loadVol:function(){var t=this.get("use.volume"),e=$("body").hasClass("ts-volume");e&&!t&&this.showVol(),t&&!e&&this.hideVol(),this.bodyClass("ts-volume",t)},saveVol:function(t){t=t.target?t.target.value:t,window.turntablePlayer.setVolume(t),window.util.setSetting("volume",t)},rollVol:function(t){var e=0<t.originalEvent.deltaY,t=t.originalEvent.shiftKey?.2:.04,n=window.util.getSetting("volume"),e=e?n-t:n+t;$(q).val(e),this.saveVol(e)},muteVol:function(){this.muted=!this.muted,this.bodyClass("ts-muted",this.muted);var t=window.util.getSetting("volume"),t=this.muted?-7:t;window.turntablePlayer.setVolume(t),this.print("Turned Mute ".concat(this.onOff(this.muted)))}},He="#tsMuteBtn",q="#tsVolSlide",_e=".header-content",Be="DOMMouseScroll mousewheel",Fe=function(){return'\n  <div id="tsVolume">\n    <span id="tsMuteBtn"></span>\n    <input id="tsVolSlide" type="range" min="0" max="4" step="0.04" value="'.concat(window.util.getSetting("volume"),'">\n    <em id="tsMutedMsg">Muted For One Song</em>\n  </div>\n')};const Je={tools:i,events:{song:function(){this.muted&&this.muteVol()},save:i.loadVol,attach:i.loadVol}},Ue={tools:{notifyWord:function(t,e){var n=e.toLowerCase()==t.text.toLowerCase(),o=-1<t.text.toLowerCase().indexOf(e.toLowerCase());(this.get("on.exact")?n:o)&&(t.target.addClass("mention"),n="Hot Word: ".concat(e),this.notify({head:n,text:t.text,type:"word"}),this.ding())}},events:{join:function(t){this.get("post.join")&&(t=t.user.name,this.post({head:t,text:"joined.",type:"join"}))},left:function(t){this.get("post.left")&&(t=t.user.name,this.post({head:t,text:"left.",type:"left"}))},snag:function(t){this.get("post.snag")&&(t=t.user.name,this.post({head:t,text:"has snagged this track!",type:"snag"}))},mail:function(t){var e;this.get("on.pm")&&(e="New PM from: ".concat(t.user.name),this.notify({head:e,text:t.text,type:"mail"}))},song:function(t){var e;this.get("on.song")&&(e="Now Playing: ".concat(t.name),t="By: ".concat(t.artist),this.notify({head:e,text:t,type:"song"}))},chat:[function(t){var e;this.get("on.mention")&&t.ping&&(e="New Mention by: ".concat(t.user.name),this.notify({head:e,text:t.text,type:"ping"}))},function(e){var n=this,t=this.get("on.text");t&&t.length&&this.strArr(t,",").forEach(function(t){return n.notifyWord(e,t)})}]}};var We={head:"Still there?",text:"I've marked you as AFK until you get back!",type:"action"},Ve={head:"Welcome back!",text:"You're no longer AFK!",type:"action"};const Ke={tools:{timeIdle:0,mailIdle:{},pingIdling:function(t){var e=this.get("afk.text"),e=this.strArr(e,";;");this.batch(e,t)},scanIdling:function(t){var e=this.get("afk.text");this.strArr(e,";;").includes(e)||(this.set("afk.idle",!1),this.post(Ve),this.timeIdle=0)}},events:{loop:function(){var t=this.get("afk.auto");t&&!this.get("afk.idle")&&(this.timeIdle+=1,this.timeIdle<t||(this.debug("Running Auto AFK..."),this.set("afk.idle",!0),this.post(We)))},chat:function(t){if(t.self&&(this.timeIdle=0),this.get("afk.idle"))return t.self?this.scanIdling(t.text):t.ping?this.pingIdling():void 0},mail:function(t){var e=this;this.get("afk.idle")&&!this.mailIdle[t.user.id]&&(this.pingIdling(t.user.id),this.mailIdle[t.user.id]=setTimeout(function(){return delete e.mailIdle[t.user.id]},3e4))},save:function(t,e){"afk.idle"==t&&(e&&this.pingIdling(),this.timeIdle=0)}}};r={autobop:function(t){var e=this.get("autobop");this.bopping&&clearTimeout(this.bopping),t.self||this.now_playing.none||!e||(t=Math.floor(7*Math.random()*1e3),this.debug("Autobop: ".concat(t/1e3," Seconds.")),this.bopping=setTimeout(this.vote(),t))}};const ze={tools:r,events:{loop:function(t){var e=this.room.name,n=this.get("note.on"),o=this.get("note.text"),t=t.beat%n==0;n&&o&&t&&this.chat("[".concat(e,"] ").concat(o))},song:r.autobop,attach:r.autobop}};function Qe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var s={takeJump:function(t){var e=this.user.id,n=this.room.metadata;return n.djs[e]||this.current_djs[e]?this.print("Jump: Landed On Deck."):!$(".become-dj").length||n.dj_full?this.print("Jump: No Spot Open."):(this.print("Jump: Attempting..."),this.jump(),t?this.redoJump(t-1):void this.print("Jump: Max Attempts"))},redoJump:function(t){var e=this;setTimeout(function(){return e.takeJump(t)}.bind(this),400)},findJump:function(t){var e,n,o=this.get("dj.text"),a=function(t){var e,n,o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=function(t){if(t){if("string"==typeof t)return Qe(t,void 0);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Qe(t,void 0):void 0}}(t)))return o&&(t=o),e=0,{s:n=function(){},n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,r=!1;return{s:function(){o=o.call(t)},n:function(){var t=o.next();return i=t.done,t},e:function(t){r=!0,a=t},f:function(){try{i||null==o.return||o.return()}finally{if(r)throw a}}}}(this.strArr(o,";;"));try{for(a.s();!(e=a.n()).done;)if(n=e.value,-1<o.indexOf(n))return!0}catch(t){a.e(t)}finally{a.f()}return!1},autoJump:function(t){this.get("dj.auto")&&this.findJump(t.text)&&(this.print("Jump: Autoqueue..."),this.takeJump(6))},scanJump:function(){this.get("dj.next")&&(this.print("Jump: Next DJ..."),this.takeJump(3))}},Ge={head:"You've hopped on deck!",text:"NextDJ has been disabled.",type:"action"},Ye={head:"You've finished spinning!",text:"(turnStyles has escorted you from the deck!)",type:"action"},Xe=function(t){return{head:"You've started spinning!",text:"(turnStyles will escort you after ".concat(t," song(s)!)"),type:"action"}};const Ze={tools:s,events:{song:function(t){if(this.get("dj.done")){var e=this.after||this.get("dj.after");if(t.self)return this.bully(Xe(e));t.last.djid==this.user.id&&(this.after=e-1,this.after||(this.set("dj.done",!1),this.bully(Ye),this.drop()))}},jump:function(t){t.self&&this.get("dj.next")&&(this.set("dj.next",!1),this.bully(Ge))},chat:s.autoJump,mail:s.autoJump,drop:s.scanJump,save:s.scanJump}};var tn=function(t){return'<img src="'.concat((t=t,"".concat("https://cdn.betterttv.net/emote","/").concat(t,"/1x")),'">')},en=function(t){return'<img src="'.concat((t=t,"".concat("https://static-cdn.jtvnw.net/emoticons/v2","/").concat(t,"/static/light/1.0")),'">')},nn=function(t){return t.split(":p").join("").split(":P").join("").split('<span title="stuck_out_tongue" class="emoji emoji-stuck_out_tongue emoji-small"></span>').join("")},on=function(t){return'.chat .text:contains("'.concat(t,'")')};const an={tools:{realEmoji:function(t){return":"==t[0]&&":"==t[t.length-1]},findEmoji:function(t){if(this.realEmoji(t)){var t=t.split(":").join("").toLowerCase(),e=this.twitMap.get(t);if(e)return en(e);e=this.bttvMap.get(t);return!!e&&tn(e)}},makeEmoji:function(t,e){var n=nn(t);on().each(function(){var t=this.innerHTML.split(n).join(e);this.innerHTML=nn(t)})}},events:{chat:function(t){var n=this;this.get("use.emojis")&&this.strArr(t.text).forEach(function(t){var e=n.findEmoji(t);e&&n.makeEmoji(t,e)})}}};var rn=function(t){return'\n\t<div id="tsHints"><div class="wrap">'.concat(t,"</div></div>\n")},sn=function(t,e){return'\n\t<div class="icon" data-icon="'.concat(t,'">').concat(e," :").concat(t,":</div>\n")};const cn={tools:{hideHints:function(){return $("#tsHints").remove()},findHints:function(e){function n(t){return 0==t.indexOf(e)&&o.push(t)}var o=[];this.twitMap.forEach(function(t,e){return n(e)}),this.bttvMap.forEach(function(t,e){return n(e)}),this.listHints(o.sort())},listHints:function(t){var e=this;this.hideHints(),t.length&&(t=t.map(function(t){return sn(t=t,e.findEmoji(":".concat(t,":")))}).join(""),$("body").append(rn(t)),$("#tsHints .icon").on("click",this.sendHints.bind(this)))},sendHints:function(t){var e=$("#chat-input"),n=e.val().split(" "),t=t.target.dataset.icon;n[n.length-1]=":".concat(t,":"),e.val(n.join(" ")).focus(),this.view.typeahead.clearTypeahead(),this.hideHints()}},events:{type:function(t){if(this.get("use.emojis")){var t=t.split(" "),t=t[t.length-1],e=":"==t[0]&&1<t.length,t=t.split(":").join("");if(e)return this.findHints(t);this.hideHints()}}}},ln={events:{chat:function(t){var e=t.target,t=this.patrons[t.user.id];e&&t&&e.addClass("patron")},save:function(t,e){if("isfan"==t){t=this.strings.author;if(e)return this.user.removeFan(t);this.print("Thanks For The Fan <3"),this.user.addFan(t)}},attach:function(){var t=this.strings.author;this.user.isFanof(t)&&this.set("isfan",!0),this.get("isfan")&&(this.print("Thanks For The Fan <3"),this.user.addFan(t))}}};var un=".profile.modal .website",dn=".profile.modal .ts-stats",hn=".profile.modal .section.web-links",fn=function(t){t='href="'.concat("https://thompsn.com/turntable/leaderboard/thing/","?id=").concat(t,'"');return"<a ".concat('class="ts-stats" target="_blank"'," ").concat(t," ").concat("onclick=\"$('.modal .close-x')[0].click()\"",">Leaderboard</a>")},bn=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"yay"in t&&(e+="".concat(t.yay,"❤️ ")),"meh"in t&&(e+="".concat(t.meh,"💔 ")),"snag"in t&&(e+="".concat(t.snag,"💖 ")),"spun"in t&&(e+="".concat(t.spun,"▶️")),e};const pn={events:{user:function(t){$(dn).length||(t=fn(t.user.id),$(hn).show(),$(un).append(t))},drop:function(t){var e;t.stat&&this.get("post.spun")&&(e=bn(t.stat),t="<strong>".concat(t.user.name,"</strong>"),t="".concat(t," is done spinning!"),e&&this.post({head:e,text:t,type:"stat"}))},song:function(t){var e;t.last&&this.get("post.song")&&(e=bn(t.last),t="".concat(t.last.song," by ").concat(t.last.artist),e&&this.post({head:e,text:t,type:"stat"}))}}};var gn='\n\t<div id="tsLog">\n\t\t<h3>tS Room Logs</h3>\n\t\t<div class="book"></div>\n\t</div>\n',mn=function(t){return'\n\t<div class="ts-log '.concat(t.type,'">\n\t\t<div class="tl-time">').concat(t.time,'</div>\n\t\t<div class="tl-text">').concat(t.text,"</div>\n\t\t").concat(t.data?'<div class="tl-data">'.concat(t.data,"</div>"):"","\n\t</div>\n")};const yn={events:{log:function(){var t=$("#tsLog .book")[0]||{},e=this.logs.map(mn);t.innerHTML=e.join(""),t.scrollTop=t.scrollHeight},attach:function(){$("#tsLog").remove(),$(".room-info-nav").after(gn)}}};function vn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var c={qtbtn1:function(){this.quickText("qtbtn1")},qtbtn2:function(){this.quickText("qtbtn2")},qtbtn3:function(){this.quickText("qtbtn3")},quickText:function(t){var t=this.get(t),t=function(t){if(Array.isArray(t))return t}(t=this.prefix(t))||function(t){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var n,o,a=[],i=!0,r=!1;try{for(e=e.call(t);!(i=(n=e.next()).done)&&(a.push(n.value),2!==a.length);i=!0);}catch(t){r=!0,o=t}finally{try{i||null==e.return||e.return()}finally{if(r)throw o}}return a}}(t)||function(t){if(t){if("string"==typeof t)return vn(t,2);var e=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(e="Object"===e&&t.constructor?t.constructor.name:e)||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?vn(t,2):void 0}}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),t=(t[0],t[1]),t=this.strArr(t,";;");this.batch(t)}},l={chat:function(t){t.target&&this.get("use.stamps")&&(t.target.has(".ts-time").length||t.target.prepend(kn(this.getTime())))},text:function(t){t.target.children(wn).each(function(t,e){return $(e).addClass("stat")})}},wn="".concat(".message:has(.text):not(.stat)",':contains("started playing")'),kn=function(t){return'<div class="ts-time">'.concat(t,"</div>")};const jn={tools:c,events:l};u={scanRecent:function(){var t=this.findRecent.bind(this);this.holdRecent&&clearTimeout(this.holdRecent),this.holdRecent=setTimeout(t,300)},findRecent:function(){var n=this;$(".ts-played").removeClass(".ts-played"),this.get("use.recent")&&$("#queue .songs .song").each(function(t,e){return n.markRecent(e)})},markRecent:function(e){var t=this.room.metadata.songlog,n=$(e).find(".title").text(),o=$(e).find(".details").text().split(" • ")[0];t.forEach(function(t){return(t=t.metadata).song==n&&t.artist==o&&$(e).addClass("ts-played")})},countSongs:function(t){var e,n;t.curr||(t=$("#playlist-header .text")[0],e=window.playlist.fileids.length,n=t.innerHTML.split("<em>")[0],t.innerHTML="".concat(n,"<em>").concat(e,"</em>"))},scrollSongs:function(t){t.curr||($("#songs").scrollTop=0)}};const Sn={tools:u,events:{save:function(t,e){"use.recent"==t&&(this.bodyClass("ts-recent",e),this.findRecent())},song:u.scanRecent,list:[u.scanRecent,u.countSongs,u.scrollSongs],attach:[u.scanRecent,u.countSongs]}};d=window.localStorage.getItem("tsData"),h=window.localStorage.getItem("tsSync"),P=window.localStorage.getItem("tsBase");window.localStorage.removeItem("tsBase"),window.localStorage.removeItem("tsSync"),h&&"undefined"!=h||(h="{}"),d&&"undefined"!=d||(d="{}");e="".concat(P,"/images/icon128.png"),n=window.$ts=new ee({name:"turnStyles",icon:e,base:P,data:d,sync:h});(a=n).default=oe,a.version=ne.i8,a.bttvMap=new Map(C.k),a.twitMap=new Map(C.i),i={options:ae,patrons:ie,strings:re},a.addPlugin({tools:i}),a.addPlugin(le),a.addPlugin(de),(r=n).addPlugin(D),r.addPlugin(R),r.addPlugin(t),(s=n).addPlugin(ye),s.addPlugin(we),s.addPlugin(Te),s.addPlugin(Pe),s.addPlugin(Re),(c=n).addPlugin(qe),c.addPlugin(Ne),c.addPlugin(Je),c.addPlugin(Ue),c.addPlugin(Ke),c.addPlugin(ze),c.addPlugin(Ze),c.addPlugin(an),c.addPlugin(cn),c.addPlugin(ln),c.addPlugin(pn),c.addPlugin(yn),c.addPlugin(jn),c.addPlugin(Sn),P?n.attach():n.update()})();